<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover"
    />
    <meta name="toss:color-scheme" content="light dark" />
    <link rel="preconnect" href="https://toss.im" />
    <link rel="preconnect" href="https://static.toss.im" />
    <link rel="preconnect" href="https://polyfill-fe.toss.im" />
    <link rel="stylesheet" type="text/css" href="https://static.toss.im/tps/main.css" />
    <link rel="stylesheet" type="text/css" href="https://static.toss.im/tps/others.css" />
    <link rel="stylesheet" type="text/css" href="../shared/css/style.css" />
    <link rel="stylesheet" type="text/css" href="../shared/css/tds.css" />
    <script src="https://polyfill-fe.toss.im/index.js"></script>
    <link rel="preconnect" href="https://polyfill-fe.toss.im" />
    <link rel="preconnect" href="https://assets-fe.toss.im" />
    <link rel="shortcut icon" href="https://static.toss.im/tds/favicon/favicon.ico" />
    <link rel="icon" type="image/png" sizes="16x16" href="https://static.toss.im/tds/favicon/favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="https://static.toss.im/tds/favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="48x48" href="https://static.toss.im/tds/favicon/favicon-48x48.png" />
    <link rel="icon" type="image/png" sizes="196x196" href="https://static.toss.im/tds/favicon/favicon-196x196.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="https://static.toss.im/tds/favicon/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="https://static.toss.im/tds/favicon/apple-touch-icon-72x72.png" />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="https://static.toss.im/tds/favicon/apple-touch-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="https://static.toss.im/tds/favicon/apple-touch-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="https://static.toss.im/tds/favicon/apple-touch-icon-144x144.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="https://static.toss.im/tds/favicon/apple-touch-icon-152x152.png"
    />
    <meta name="msapplication-TileImage" content="https://static.toss.im/tds/favicon/mstile-144x144.png" />
    <title>메리츠증권</title>
    <style>
      html,
      body,
      #root {
        height: 100%;
        background: var(--adaptiveBackground);
      }
    </style>
  </head>

  <body>
    <div id="root" />
    <script src="https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js"></script>
    <script src="../shared/js/toss-app-bridge.js"></script>
    <script src="../shared/js/toss-utils.js"></script>
    <script>
      (function () {
        window.toss = {
          // 입금 계좌 정보
          // TODO: 입금 게좌 정보에 적절한 값을 채워주세요.
          to: {
            name: '내 토스뱅크 계좌',
            corpName: '토스뱅크',
            accountNumber: 10013039485,
          },
          // 보낼 금액
          // TODO: 보낼 금액을 알맞게 넣어주세요.
          amount: 10000,
          // 확인했어요 버튼 클릭 이벤트 핸들러
          onConfirmButtonClick: function () {
            tossAppBridge.closeWebView();
          },
          // 화면 진입 직후에 실행되는 콜백 함수. 이곳에 이체하기 로직을 작성해주세요.
          onMount: function (params) {
            // 입력한 금액
            var amount = params.amount;
            var openAlertDialog = params.openAlertDialog;

            new Promise(function (resolve, reject) {
              // 이체하기에 성공한 경우 resolve()를 호출합니다.
              // resolve();

              // 이체하기에 실패한 경우 reject(failureReason)를 호출합니다.
              // 이체 실패 사유 ('송금지연' | '장기미사용 거래제한' | '점검 중')
              var failureReason = '송금지연';

              reject(failureRason);
            })
              .then(function () {
                // 이체하기에 성공한 경우 완료 화면으로 이동합니다.
                window.location.href = './5-Complete.html';
              })
              .catch(function (failureReason) {
                // 이체하기에 실패한 경우 실패 사유에 따라 로직을 분기합니다.
                if (failureReason === '송금지연') {
                  window.location.href = '';
                } else if (failureReason === '장기미사용 거래제한') {
                  window.location.href = '';
                } else if (failureReason === '점검 중') {
                  openAlertDialog({
                    title: '지금은 점검 시간이에요',
                    description: '메리츠증권 점검이 끝나면 다시 시도해주세요. (23:30~00:10)',
                  }).then(function () {
                    tossAppBridge.closeWebView();
                  });
                }
              });
          },
        };
      })();
    </script>
    <script src="./js/4-Loading.js"></script>
  </body>
</html>
